# Process

프로세스는 실행 중인 프로그램의 인스턴스이다.운영체제에 의해 메모리에 올라와 실행되고 있는 프로그램의 인스턴스이다.
각각의 프로세스는 독립된 메모리 공간과 시스템 자원을 할당받는다.

예를 들어, 크롬을 실행하게 되면 크롬 프로그램이 *메모리*에 로드되어 프로세스가 된다.

## 메모리 공간

- 코드영역: 실행할 프로그램의 코드가 저장
- 데이터 영역: 전역, 정적 변수가 저장
- 힙 영역: 동적으로 할당되는 메모리 공간
- 스택 영역: 함수 호출, 로컬 변수 저장

## 프로세스 식별자

운영체제는 각 프로세스에 고유한 PID(Process ID)를 부여한다.
크롬을 두개 실행하면, 같으 프로그램이지만 서로 다른 PID를 가진 별도의 프로세스가 된다.

## 프로세스의 상태

```text
new -> ready -> running -> waiting -> terminated
```

- New: 생성
- Ready: 실행 준비(CPU 할당 대기)
- Running: 실행 (CPU를 할당받아 실행중인 상태)
- Waiting: I/O 작업등이 끝나기를 기다리는 상태
- Terminated: 종료

## 멀티 프로세스

여러개의 프로세스가 동시에 실행되는 것.(다양한 프로그램이 동시에 실행)

**멀티 프로세스의 동작방식**

1. CPU 시분할
   - CPU는 한번에 하나의 프로세스만 실행가능하지만 여러 프로세스를 빠르게 번갈아 실행하여 동시 실행처럼 보이게 하며 이를 '시분할(Time Sharing)'방식이라고 한다.
   - [spotify: 2ms] -> [chrome: 2ms] -> [vscode: 2ms] -> [spotify: 2ms] -> ..
2. 컨텍스트 스위칭
   - 한 프로세스에서 다른 프로세스로 전환될 떄, 현재 프로세스의 상태를 저장하고 다음 프로세스의 상태를 복원
   - 음악 프로그램 실행중 -> 플레이어 상태 저장 -> 웹 브라우저 상태 복원 -> 웹 브라우저 실행
3. 프로세스 간 통신
   - 멀티프로세스 환경에서 서로 통신할 수 있다.

## CPU코어와 프로세스

단일 코어 CPU: 한번에 하나의 프로세스만 실행
멀티 코어 CPU: 실제로 물리적인 CPU코어가 여러개로 각 코어가 독립적으로 프로세스 실행 가능

현대 컴퓨터는 대부분 멀티 코어를 사용한다.

```text
단일코어
[프로세스A][프로세스B][프로세스C][프로세스A]...
```

```text
멀티코어
코어1: [프로세스A][프로세스B][프로세스A]...
코어2: [프로세스C][프로세스D][프로세스C]...
코어3: [프로세스E][프로세스F][프로세스E]...
코어4: [프로세스G][프로세스H][프로세스G]...
```
